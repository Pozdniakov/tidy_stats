<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Вектор | Анализ данных и статистика в R</title>
  <meta name="description" content="3 Вектор | Анализ данных и статистика в R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Вектор | Анализ данных и статистика в R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Вектор | Анализ данных и статистика в R" />
  
  
  

<meta name="author" content="Поздняков Иван" />


<meta name="date" content="2021-03-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro.html"/>
<link rel="next" href="complex-structures.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.16/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Анализ данных и статистика в R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> О курсе</a></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Введение в R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#install"><i class="fa fa-check"></i><b>2.1</b> Установка R и Rstudio</a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#rstudio"><i class="fa fa-check"></i><b>2.2</b> Знакомство с RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#calc"><i class="fa fa-check"></i><b>2.3</b> R как калькулятор</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#func"><i class="fa fa-check"></i><b>2.4</b> Функции</a></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#google"><i class="fa fa-check"></i><b>2.5</b> В любой непонятной ситуации — гуглите</a></li>
<li class="chapter" data-level="2.6" data-path="intro.html"><a href="intro.html#variables"><i class="fa fa-check"></i><b>2.6</b> Переменные</a></li>
<li class="chapter" data-level="2.7" data-path="intro.html"><a href="intro.html#logic"><i class="fa fa-check"></i><b>2.7</b> Логические операторы</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vector.html"><a href="vector.html"><i class="fa fa-check"></i><b>3</b> Вектор</a>
<ul>
<li class="chapter" data-level="3.1" data-path="vector.html"><a href="vector.html#atomic"><i class="fa fa-check"></i><b>3.1</b> Понятие atomic вектора в R</a></li>
<li class="chapter" data-level="3.2" data-path="vector.html"><a href="vector.html#coercion"><i class="fa fa-check"></i><b>3.2</b> Приведение типов</a></li>
<li class="chapter" data-level="3.3" data-path="vector.html"><a href="vector.html#vector_op"><i class="fa fa-check"></i><b>3.3</b> Векторизация</a></li>
<li class="chapter" data-level="3.4" data-path="vector.html"><a href="vector.html#recycling"><i class="fa fa-check"></i><b>3.4</b> Ресайклинг</a></li>
<li class="chapter" data-level="3.5" data-path="vector.html"><a href="vector.html#index_atomic"><i class="fa fa-check"></i><b>3.5</b> Индексирование векторов</a></li>
<li class="chapter" data-level="3.6" data-path="vector.html"><a href="vector.html#logic_vectors"><i class="fa fa-check"></i><b>3.6</b> Работа с логическими векторами</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="vector.html"><a href="vector.html#logic_mean_sum"><i class="fa fa-check"></i><b>3.6.1</b> <code>mean()</code> и <code>sum()</code> для подсчета пропорций и количества TRUE</a></li>
<li class="chapter" data-level="3.6.2" data-path="vector.html"><a href="vector.html#all_any"><i class="fa fa-check"></i><b>3.6.2</b> <code>all()</code> и <code>any()</code></a></li>
<li class="chapter" data-level="3.6.3" data-path="vector.html"><a href="vector.html#which"><i class="fa fa-check"></i><b>3.6.3</b> Превращение логических значений в индексы: <code>which()</code></a></li>
<li class="chapter" data-level="3.6.4" data-path="vector.html"><a href="vector.html#in"><i class="fa fa-check"></i><b>3.6.4</b> оператор %in% и match()</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="vector.html"><a href="vector.html#na"><i class="fa fa-check"></i><b>3.7</b> NA - пропущенные значения</a></li>
<li class="chapter" data-level="3.8" data-path="vector.html"><a href="vector.html#vector_end"><i class="fa fa-check"></i><b>3.8</b> Заключение</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="complex-structures.html"><a href="complex-structures.html"><i class="fa fa-check"></i><b>4</b> Сложные структуры данных в R</a>
<ul>
<li class="chapter" data-level="4.1" data-path="complex-structures.html"><a href="complex-structures.html#matrix"><i class="fa fa-check"></i><b>4.1</b> Матрица</a></li>
<li class="chapter" data-level="4.2" data-path="complex-structures.html"><a href="complex-structures.html#arrays"><i class="fa fa-check"></i><b>4.2</b> Массив</a></li>
<li class="chapter" data-level="4.3" data-path="complex-structures.html"><a href="complex-structures.html#list"><i class="fa fa-check"></i><b>4.3</b> Список</a></li>
<li class="chapter" data-level="4.4" data-path="complex-structures.html"><a href="complex-structures.html#df"><i class="fa fa-check"></i><b>4.4</b> Датафрейм</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="r-packages.html"><a href="r-packages.html"><i class="fa fa-check"></i><b>5</b> Пакеты в R</a>
<ul>
<li class="chapter" data-level="5.1" data-path="r-packages.html"><a href="r-packages.html#extra_pack"><i class="fa fa-check"></i><b>5.1</b> Дополнительные пакеты</a></li>
<li class="chapter" data-level="5.2" data-path="r-packages.html"><a href="r-packages.html#r_built_in"><i class="fa fa-check"></i><b>5.2</b> Встроенные пакеты R</a></li>
<li class="chapter" data-level="5.3" data-path="r-packages.html"><a href="r-packages.html#install_cran"><i class="fa fa-check"></i><b>5.3</b> Установка пакетов с CRAN</a></li>
<li class="chapter" data-level="5.4" data-path="r-packages.html"><a href="r-packages.html#package_load"><i class="fa fa-check"></i><b>5.4</b> Загрузка установленного пакета</a></li>
<li class="chapter" data-level="5.5" data-path="r-packages.html"><a href="r-packages.html#from_package"><i class="fa fa-check"></i><b>5.5</b> Вызов функции из пакета с помощью <code>::</code></a></li>
<li class="chapter" data-level="5.6" data-path="r-packages.html"><a href="r-packages.html#install_bioc"><i class="fa fa-check"></i><b>5.6</b> Установка пакетов c Bioconductor</a></li>
<li class="chapter" data-level="5.7" data-path="r-packages.html"><a href="r-packages.html#install_github"><i class="fa fa-check"></i><b>5.7</b> Установка пакетов с Github</a></li>
<li class="chapter" data-level="5.8" data-path="r-packages.html"><a href="r-packages.html#where_packages"><i class="fa fa-check"></i><b>5.8</b> Где искать нужные пакеты</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="real-data.html"><a href="real-data.html"><i class="fa fa-check"></i><b>6</b> Импорт и экспорт данных</a>
<ul>
<li class="chapter" data-level="6.1" data-path="real-data.html"><a href="real-data.html#wd"><i class="fa fa-check"></i><b>6.1</b> Рабочая папка и проекты RStudio</a></li>
<li class="chapter" data-level="6.2" data-path="real-data.html"><a href="real-data.html#project_workflow"><i class="fa fa-check"></i><b>6.2</b> Организация проектов</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="real-data.html"><a href="real-data.html#text_binary"><i class="fa fa-check"></i><b>6.2.1</b> Табличные данные: текстовые и бинарные данные</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="real-data.html"><a href="real-data.html#check_imported"><i class="fa fa-check"></i><b>6.3</b> Проверка импортированных данных</a></li>
<li class="chapter" data-level="6.4" data-path="real-data.html"><a href="real-data.html#export_data"><i class="fa fa-check"></i><b>6.4</b> Экспорт данных</a></li>
<li class="chapter" data-level="6.5" data-path="real-data.html"><a href="real-data.html#binary"><i class="fa fa-check"></i><b>6.5</b> Импорт таблиц в бинарном формате: таблицы Excel, SPSS</a></li>
<li class="chapter" data-level="6.6" data-path="real-data.html"><a href="real-data.html#fastread"><i class="fa fa-check"></i><b>6.6</b> Быстрый импорт данных</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="loops-conditions.html"><a href="loops-conditions.html"><i class="fa fa-check"></i><b>7</b> Условные конструкции и циклы</a>
<ul>
<li class="chapter" data-level="7.1" data-path="loops-conditions.html"><a href="loops-conditions.html#if"><i class="fa fa-check"></i><b>7.1</b> Выражения <code>if</code>, <code>else</code>, <code>else if</code></a></li>
<li class="chapter" data-level="7.2" data-path="loops-conditions.html"><a href="loops-conditions.html#for"><i class="fa fa-check"></i><b>7.2</b> Циклы <code>for</code></a></li>
<li class="chapter" data-level="7.3" data-path="loops-conditions.html"><a href="loops-conditions.html#ifelse"><i class="fa fa-check"></i><b>7.3</b> Векторизованные условные конструкции: функции <code>ifelse()</code> и <code>dplyr::case_when()</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="functional.html"><a href="functional.html"><i class="fa fa-check"></i><b>8</b> Функциональное программирование в R</a>
<ul>
<li class="chapter" data-level="8.1" data-path="functional.html"><a href="functional.html#create_fun"><i class="fa fa-check"></i><b>8.1</b> Создание функций</a></li>
<li class="chapter" data-level="8.2" data-path="functional.html"><a href="functional.html#sanity_check"><i class="fa fa-check"></i><b>8.2</b> Проверка на адекватность</a></li>
<li class="chapter" data-level="8.3" data-path="functional.html"><a href="functional.html#why_functions"><i class="fa fa-check"></i><b>8.3</b> Когда и зачем создавать функции?</a></li>
<li class="chapter" data-level="8.4" data-path="functional.html"><a href="functional.html#functions_objects"><i class="fa fa-check"></i><b>8.4</b> Функции как объекты первого порядка</a></li>
<li class="chapter" data-level="8.5" data-path="functional.html"><a href="functional.html#apply_f"><i class="fa fa-check"></i><b>8.5</b> Семейство функций apply()</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="functional.html"><a href="functional.html#apply"><i class="fa fa-check"></i><b>8.5.1</b> Применение <code>apply()</code> для матриц</a></li>
<li class="chapter" data-level="8.5.2" data-path="functional.html"><a href="functional.html#anon_f"><i class="fa fa-check"></i><b>8.5.2</b> Анонимные функции</a></li>
<li class="chapter" data-level="8.5.3" data-path="functional.html"><a href="functional.html#apply_other"><i class="fa fa-check"></i><b>8.5.3</b> Другие функции семейства <code>apply()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tidy-intro.html"><a href="tidy-intro.html"><i class="fa fa-check"></i><b>9</b> Введение в tidyverse</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_verse"><i class="fa fa-check"></i><b>9.1</b> Вселенная tidyverse</a></li>
<li class="chapter" data-level="9.2" data-path="tidy-intro.html"><a href="tidy-intro.html#загрузка-данных-с-помощью-readr"><i class="fa fa-check"></i><b>9.2</b> Загрузка данных с помощью <code>readr</code></a></li>
<li class="chapter" data-level="9.3" data-path="tidy-intro.html"><a href="tidy-intro.html#pipe"><i class="fa fa-check"></i><b>9.3</b> magrittr::<code>%&gt;%</code></a></li>
<li class="chapter" data-level="9.4" data-path="tidy-intro.html"><a href="tidy-intro.html#главные-пакеты-tidyverse-dplyr-и-tidyr"><i class="fa fa-check"></i><b>9.4</b> Главные пакеты tidyverse: <code>dplyr</code> и <code>tidyr</code></a></li>
<li class="chapter" data-level="9.5" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_select_cols"><i class="fa fa-check"></i><b>9.5</b> Работа с колонками тиббла</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="tidy-intro.html"><a href="tidy-intro.html#выбор-колонок-dplyrselect"><i class="fa fa-check"></i><b>9.5.1</b> Выбор колонок: <code>dplyr::select()</code></a></li>
<li class="chapter" data-level="9.5.2" data-path="tidy-intro.html"><a href="tidy-intro.html#tidyselect"><i class="fa fa-check"></i><b>9.5.2</b> Мини-язык tidyselect для выбора колонок</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_select_rows"><i class="fa fa-check"></i><b>9.6</b> Работа со строками тиббла</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_slice"><i class="fa fa-check"></i><b>9.6.1</b> Выбор строк по номеру: <code>dplyr::slice()</code></a></li>
<li class="chapter" data-level="9.6.2" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_filter"><i class="fa fa-check"></i><b>9.6.2</b> Выбор строк по условию: <code>dplyr::filter()</code></a></li>
<li class="chapter" data-level="9.6.3" data-path="tidy-intro.html"><a href="tidy-intro.html#slice_family"><i class="fa fa-check"></i><b>9.6.3</b> Семейство функций <code>slice()</code></a></li>
<li class="chapter" data-level="9.6.4" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_drop_na"><i class="fa fa-check"></i><b>9.6.4</b> Удаление строчек с NA: <code>tidyr::drop_na()</code></a></li>
<li class="chapter" data-level="9.6.5" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_arrange"><i class="fa fa-check"></i><b>9.6.5</b> Сортировка строк: <code>dplyr::arrange()</code></a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_mutate"><i class="fa fa-check"></i><b>9.7</b> Создание колонок: <code>dplyr::mutate()</code> и <code>dplyr::transmute()</code></a></li>
<li class="chapter" data-level="9.8" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_aggregate"><i class="fa fa-check"></i><b>9.8</b> Агрегация данных в тиббле</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="tidy-intro.html"><a href="tidy-intro.html#summarise"><i class="fa fa-check"></i><b>9.8.1</b> Подытоживание: <code>summarise()</code></a></li>
<li class="chapter" data-level="9.8.2" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_group"><i class="fa fa-check"></i><b>9.8.2</b> Группировка: <code>group_by()</code></a></li>
<li class="chapter" data-level="9.8.3" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_count"><i class="fa fa-check"></i><b>9.8.3</b> Подсчет строк: <code>dplyr::n()</code>, <code>dplyr::count()</code></a></li>
<li class="chapter" data-level="9.8.4" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_distinct"><i class="fa fa-check"></i><b>9.8.4</b> Уникальные значения: <code>dplyr::distinct()</code></a></li>
<li class="chapter" data-level="9.8.5" data-path="tidy-intro.html"><a href="tidy-intro.html#tidy_group_mutate"><i class="fa fa-check"></i><b>9.8.5</b> Создание колонок с группировкой</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tidyverse-advanced.html"><a href="tidyverse-advanced.html"><i class="fa fa-check"></i><b>10</b> Продвинутый tidyverse</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tidyverse-advanced.html"><a href="tidyverse-advanced.html#трансформация-нескольких-колонок-dplyracross"><i class="fa fa-check"></i><b>10.1</b> Трансформация нескольких колонок: <code>dplyr::across()</code></a></li>
<li class="chapter" data-level="10.2" data-path="tidyverse-advanced.html"><a href="tidyverse-advanced.html#tidy_several"><i class="fa fa-check"></i><b>10.2</b> Объединение нескольких датафреймов</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="tidyverse-advanced.html"><a href="tidyverse-advanced.html#tidy_bind"><i class="fa fa-check"></i><b>10.2.1</b> Соединение структурно схожих датафреймов: bind_rows(), bind_cols()</a></li>
<li class="chapter" data-level="10.2.2" data-path="tidyverse-advanced.html"><a href="tidyverse-advanced.html#tidy_join"><i class="fa fa-check"></i><b>10.2.2</b> Реляционные данные: <code>*_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="tidyverse-advanced.html"><a href="tidyverse-advanced.html#tidy_data"><i class="fa fa-check"></i><b>10.3</b> Tidy data: <code>tidyr::pivot_longer()</code>, <code>tidyr::pivot_wider()</code></a></li>
<li class="chapter" data-level="10.4" data-path="tidyverse-advanced.html"><a href="tidyverse-advanced.html#purrr"><i class="fa fa-check"></i><b>10.4</b> Функциональное программирование: <code>purrr</code></a></li>
<li class="chapter" data-level="10.5" data-path="tidyverse-advanced.html"><a href="tidyverse-advanced.html#list_colums_nest"><i class="fa fa-check"></i><b>10.5</b> Колонки-списки и нестинг: <code>nest()</code></a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="vdesc.html"><a href="vdesc.html"><i class="fa fa-check"></i><b>11</b> Описательная статистика</a>
<ul>
<li class="chapter" data-level="11.1" data-path="vdesc.html"><a href="vdesc.html#desc_infer"><i class="fa fa-check"></i><b>11.1</b> Описательная статистика и статистика вывода</a></li>
<li class="chapter" data-level="11.2" data-path="vdesc.html"><a href="vdesc.html#типы-шкал"><i class="fa fa-check"></i><b>11.2</b> Типы шкал</a></li>
<li class="chapter" data-level="11.3" data-path="vdesc.html"><a href="vdesc.html#cent_tend"><i class="fa fa-check"></i><b>11.3</b> Меры центральной тенденции</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="vdesc.html"><a href="vdesc.html#mean"><i class="fa fa-check"></i><b>11.3.1</b> Арифметическое среднее</a></li>
<li class="chapter" data-level="11.3.2" data-path="vdesc.html"><a href="vdesc.html#median"><i class="fa fa-check"></i><b>11.3.2</b> Медиана</a></li>
<li class="chapter" data-level="11.3.3" data-path="vdesc.html"><a href="vdesc.html#trim"><i class="fa fa-check"></i><b>11.3.3</b> Усеченное среднее (trimmed mean)</a></li>
<li class="chapter" data-level="11.3.4" data-path="vdesc.html"><a href="vdesc.html#mode"><i class="fa fa-check"></i><b>11.3.4</b> Мода</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="vdesc.html"><a href="vdesc.html#vary"><i class="fa fa-check"></i><b>11.4</b> Меры рассеяния</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="vdesc.html"><a href="vdesc.html#var"><i class="fa fa-check"></i><b>11.4.1</b> Дисперсия</a></li>
<li class="chapter" data-level="11.4.2" data-path="vdesc.html"><a href="vdesc.html#sd"><i class="fa fa-check"></i><b>11.4.2</b> Стандартное отклонение</a></li>
<li class="chapter" data-level="11.4.3" data-path="vdesc.html"><a href="vdesc.html#mad"><i class="fa fa-check"></i><b>11.4.3</b> Медианное абсолютное отклонение</a></li>
<li class="chapter" data-level="11.4.4" data-path="vdesc.html"><a href="vdesc.html#iqr"><i class="fa fa-check"></i><b>11.4.4</b> Межквартильный размах</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="vdesc.html"><a href="vdesc.html#skku"><i class="fa fa-check"></i><b>11.5</b> Ассиметрия и эксцесс</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="vdesc.html"><a href="vdesc.html#skew"><i class="fa fa-check"></i><b>11.5.1</b> Ассиметрия</a></li>
<li class="chapter" data-level="11.5.2" data-path="vdesc.html"><a href="vdesc.html#kurtosis"><i class="fa fa-check"></i><b>11.5.2</b> Эксцесс</a></li>
<li class="chapter" data-level="11.5.3" data-path="vdesc.html"><a href="vdesc.html#skewR"><i class="fa fa-check"></i><b>11.5.3</b> Ассиметрия и эксцесс в R</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="vdesc.html"><a href="vdesc.html#quantiles"><i class="fa fa-check"></i><b>11.6</b> Квантили</a></li>
<li class="chapter" data-level="11.7" data-path="vdesc.html"><a href="vdesc.html#summary"><i class="fa fa-check"></i><b>11.7</b> А теперь все вместе!</a></li>
<li class="chapter" data-level="11.8" data-path="vdesc.html"><a href="vdesc.html#grammar_of_graphics"><i class="fa fa-check"></i><b>11.8</b> История грамматики графики</a></li>
<li class="chapter" data-level="11.9" data-path="vdesc.html"><a href="vdesc.html#gg_base"><i class="fa fa-check"></i><b>11.9</b> Основы грамматики графики</a></li>
<li class="chapter" data-level="11.10" data-path="vdesc.html"><a href="vdesc.html#gg_0"><i class="fa fa-check"></i><b>11.10</b> Пример №0: пайчарт с распределение по полу</a></li>
<li class="chapter" data-level="11.11" data-path="vdesc.html"><a href="vdesc.html#gg_1"><i class="fa fa-check"></i><b>11.11</b> Пример №1: Education and IQ meta-analysis</a></li>
<li class="chapter" data-level="11.12" data-path="vdesc.html"><a href="vdesc.html#gg_ext"><i class="fa fa-check"></i><b>11.12</b> Расширения <code>ggplot2</code></a></li>
<li class="chapter" data-level="11.13" data-path="vdesc.html"><a href="vdesc.html#vis_dynamic"><i class="fa fa-check"></i><b>11.13</b> Динамические визуализации в R</a>
<ul>
<li class="chapter" data-level="11.13.1" data-path="vdesc.html"><a href="vdesc.html#html_w"><i class="fa fa-check"></i><b>11.13.1</b> Интерфейс для JavaScript фреймворков: пакет <code>htmlwidgets</code></a></li>
<li class="chapter" data-level="11.13.2" data-path="vdesc.html"><a href="vdesc.html#plotly"><i class="fa fa-check"></i><b>11.13.2</b> Динамические визуализации в <code>plotly</code></a></li>
<li class="chapter" data-level="11.13.3" data-path="vdesc.html"><a href="vdesc.html#html_other"><i class="fa fa-check"></i><b>11.13.3</b> Другие пакеты для динамической визуализации</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="rmd.html"><a href="rmd.html"><i class="fa fa-check"></i><b>12</b> R Markdown</a>
<ul>
<li class="chapter" data-level="12.1" data-path="rmd.html"><a href="rmd.html#rmd_what"><i class="fa fa-check"></i><b>12.1</b> Что такое R Markdown</a></li>
<li class="chapter" data-level="12.2" data-path="rmd.html"><a href="rmd.html#rmd_begin"><i class="fa fa-check"></i><b>12.2</b> Начало работы в R Markdown</a></li>
<li class="chapter" data-level="12.3" data-path="rmd.html"><a href="rmd.html#rmd_str"><i class="fa fa-check"></i><b>12.3</b> Структура R Markdown документа</a></li>
<li class="chapter" data-level="12.4" data-path="rmd.html"><a href="rmd.html#chunk"><i class="fa fa-check"></i><b>12.4</b> Настройки чанка</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="rmd.html"><a href="rmd.html#chunks"><i class="fa fa-check"></i><b>12.4.1</b> Настройка нескольких чанков</a></li>
<li class="chapter" data-level="12.4.2" data-path="rmd.html"><a href="rmd.html#python"><i class="fa fa-check"></i><b>12.4.2</b> Чанки с Python и другими языками программирования</a></li>
<li class="chapter" data-level="12.4.3" data-path="rmd.html"><a href="rmd.html#inline"><i class="fa fa-check"></i><b>12.4.3</b> Код вне чанков (inline code)</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="rmd.html"><a href="rmd.html#md"><i class="fa fa-check"></i><b>12.5</b> Синтаксис Markdown (без R)</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="rmd.html"><a href="rmd.html#md_high"><i class="fa fa-check"></i><b>12.5.1</b> Выделение текста</a></li>
<li class="chapter" data-level="12.5.2" data-path="rmd.html"><a href="rmd.html#headers"><i class="fa fa-check"></i><b>12.5.2</b> Заголовки разных уровней</a></li>
<li class="chapter" data-level="12.5.3" data-path="rmd.html"><a href="rmd.html#md_lists"><i class="fa fa-check"></i><b>12.5.3</b> Списки</a></li>
<li class="chapter" data-level="12.5.4" data-path="rmd.html"><a href="rmd.html#md_cite"><i class="fa fa-check"></i><b>12.5.4</b> Цитаты</a></li>
<li class="chapter" data-level="12.5.5" data-path="rmd.html"><a href="rmd.html#rmd_tables"><i class="fa fa-check"></i><b>12.5.5</b> Таблицы</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="rmd.html"><a href="rmd.html#extra_rmd"><i class="fa fa-check"></i><b>12.6</b> Дополнительные возможности R Markdown</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="rmd.html"><a href="rmd.html#dynamic_tables"><i class="fa fa-check"></i><b>12.6.1</b> Динамические таблицы</a></li>
<li class="chapter" data-level="12.6.2" data-path="rmd.html"><a href="rmd.html#vis"><i class="fa fa-check"></i><b>12.6.2</b> Графики в R Markdown</a></li>
<li class="chapter" data-level="12.6.3" data-path="rmd.html"><a href="rmd.html#html_inside"><i class="fa fa-check"></i><b>12.6.3</b> HTML-код</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="infer-stats.html"><a href="infer-stats.html"><i class="fa fa-check"></i><b>13</b> Статистика вывода</a>
<ul>
<li class="chapter" data-level="13.1" data-path="infer-stats.html"><a href="infer-stats.html#infer_intro"><i class="fa fa-check"></i><b>13.1</b> Введение в статистику вывода</a></li>
<li class="chapter" data-level="13.2" data-path="infer-stats.html"><a href="infer-stats.html#estimates"><i class="fa fa-check"></i><b>13.2</b> Оценки</a></li>
<li class="chapter" data-level="13.3" data-path="infer-stats.html"><a href="infer-stats.html#distributions"><i class="fa fa-check"></i><b>13.3</b> Распределения</a></li>
<li class="chapter" data-level="13.4" data-path="infer-stats.html"><a href="infer-stats.html#sample_estimate"><i class="fa fa-check"></i><b>13.4</b> Точечные оценки</a></li>
<li class="chapter" data-level="13.5" data-path="infer-stats.html"><a href="infer-stats.html#interval_estimate"><i class="fa fa-check"></i><b>13.5</b> Интервальные оценки</a></li>
<li class="chapter" data-level="13.6" data-path="infer-stats.html"><a href="infer-stats.html#sample_dist"><i class="fa fa-check"></i><b>13.6</b> Выборочное распределение</a></li>
<li class="chapter" data-level="13.7" data-path="infer-stats.html"><a href="infer-stats.html#nordm_dist_importance"><i class="fa fa-check"></i><b>13.7</b> Важность нормального распределения</a></li>
<li class="chapter" data-level="13.8" data-path="infer-stats.html"><a href="infer-stats.html#clt"><i class="fa fa-check"></i><b>13.8</b> Центральная предельная теорема</a></li>
<li class="chapter" data-level="13.9" data-path="infer-stats.html"><a href="infer-stats.html#ci_build"><i class="fa fa-check"></i><b>13.9</b> Строим доверительный интервал</a></li>
<li class="chapter" data-level="13.10" data-path="infer-stats.html"><a href="infer-stats.html#тестирование-значимости-нулевой-гипотезы-nhst"><i class="fa fa-check"></i><b>13.10</b> Тестирование значимости нулевой гипотезы (#nhst)</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="ttest.html"><a href="ttest.html"><i class="fa fa-check"></i><b>14</b> t-тест</a>
<ul>
<li class="chapter" data-level="14.1" data-path="ttest.html"><a href="ttest.html#one_ttest"><i class="fa fa-check"></i><b>14.1</b> Одновыборочный t-тест</a></li>
<li class="chapter" data-level="14.2" data-path="ttest.html"><a href="ttest.html#two_ttest"><i class="fa fa-check"></i><b>14.2</b> Двухвыборочный t-тест</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="ttest.html"><a href="ttest.html#dep_ttest"><i class="fa fa-check"></i><b>14.2.1</b> Двухвыборочный зависимый t-тест</a></li>
<li class="chapter" data-level="14.2.2" data-path="ttest.html"><a href="ttest.html#ind_ttest"><i class="fa fa-check"></i><b>14.2.2</b> Двухвыборочный независимый t-тест</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="ttest.html"><a href="ttest.html#assumptions_ttest"><i class="fa fa-check"></i><b>14.3</b> Допущения t-теста</a></li>
<li class="chapter" data-level="14.4" data-path="ttest.html"><a href="ttest.html#nonparam_ttest"><i class="fa fa-check"></i><b>14.4</b> Непараметрические аналоги t-теста</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="ttest.html"><a href="ttest.html#wilcox_test"><i class="fa fa-check"></i><b>14.4.1</b> Тест Уилкоксона</a></li>
<li class="chapter" data-level="14.4.2" data-path="ttest.html"><a href="ttest.html#mann_test"><i class="fa fa-check"></i><b>14.4.2</b> Тест Манна-Уитни</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="cov-cor.html"><a href="cov-cor.html"><i class="fa fa-check"></i><b>15</b> Ковариация и корреляция</a>
<ul>
<li class="chapter" data-level="15.1" data-path="cov-cor.html"><a href="cov-cor.html#cov"><i class="fa fa-check"></i><b>15.1</b> Ковариация</a></li>
<li class="chapter" data-level="15.2" data-path="cov-cor.html"><a href="cov-cor.html#cor"><i class="fa fa-check"></i><b>15.2</b> Корреляция</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="cov-cor.html"><a href="cov-cor.html#pearson_cor"><i class="fa fa-check"></i><b>15.2.1</b> Коэффициент корреляции Пирсона</a></li>
<li class="chapter" data-level="15.2.2" data-path="cov-cor.html"><a href="cov-cor.html#nonparam_cor"><i class="fa fa-check"></i><b>15.2.2</b> Непараметрические коэффициенты корреляции</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="cov-cor.html"><a href="cov-cor.html#cor_mat"><i class="fa fa-check"></i><b>15.3</b> Корреляционная матрица</a></li>
<li class="chapter" data-level="15.4" data-path="cov-cor.html"><a href="cov-cor.html#hitmap_cor"><i class="fa fa-check"></i><b>15.4</b> Хитмэп корреляций</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="lm.html"><a href="lm.html"><i class="fa fa-check"></i><b>16</b> Линейная регрессия</a>
<ul>
<li class="chapter" data-level="16.1" data-path="lm.html"><a href="lm.html#lm"><i class="fa fa-check"></i><b>16.1</b> Функция <code>lm()</code></a></li>
<li class="chapter" data-level="16.2" data-path="lm.html"><a href="lm.html#interpret_lm"><i class="fa fa-check"></i><b>16.2</b> Интерпретация вывода линейной регрессии</a></li>
<li class="chapter" data-level="16.3" data-path="lm.html"><a href="lm.html#lm_a"><i class="fa fa-check"></i><b>16.3</b> Допущения линейной регрессии</a></li>
<li class="chapter" data-level="16.4" data-path="lm.html"><a href="lm.html#outliers_lm"><i class="fa fa-check"></i><b>16.4</b> Влияние выбросов на линейную модель</a></li>
<li class="chapter" data-level="16.5" data-path="lm.html"><a href="lm.html#lm_mult"><i class="fa fa-check"></i><b>16.5</b> Множественная линейная регрессия</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>17</b> Дисперсионный анализ (ANOVA)</a>
<ul>
<li class="chapter" data-level="17.0.1" data-path="anova.html"><a href="anova.html#aov"><i class="fa fa-check"></i><b>17.0.1</b> Функция aov()</a></li>
<li class="chapter" data-level="17.1" data-path="anova.html"><a href="anova.html#anova_nhst"><i class="fa fa-check"></i><b>17.1</b> Тестирование значимости нулевой гипотезы в ANOVA.</a></li>
<li class="chapter" data-level="17.2" data-path="anova.html"><a href="anova.html#anova_posthoc"><i class="fa fa-check"></i><b>17.2</b> Post-hoc тесты</a></li>
<li class="chapter" data-level="17.3" data-path="anova.html"><a href="anova.html#aov_as_lm"><i class="fa fa-check"></i><b>17.3</b> ANOVA и т-тест как частные случаи линейной регрессии</a></li>
<li class="chapter" data-level="17.4" data-path="anova.html"><a href="anova.html#dummy"><i class="fa fa-check"></i><b>17.4</b> Dummy coding</a></li>
<li class="chapter" data-level="17.5" data-path="anova.html"><a href="anova.html#aova"><i class="fa fa-check"></i><b>17.5</b> Допущения ANOVA</a></li>
<li class="chapter" data-level="17.6" data-path="anova.html"><a href="anova.html#fact_aov"><i class="fa fa-check"></i><b>17.6</b> Многофакторный дисперсионный анализ (Factorial ANOVA)</a></li>
<li class="chapter" data-level="17.7" data-path="anova.html"><a href="anova.html#rm_aov"><i class="fa fa-check"></i><b>17.7</b> Дисперсионный анализ с повторными измерениями (Repeated-measures ANOVA)</a></li>
<li class="chapter" data-level="17.8" data-path="anova.html"><a href="anova.html#mixed_aov"><i class="fa fa-check"></i><b>17.8</b> Смешанный дисперсионный анализ (Mixed between-within subjects ANOVA)</a></li>
<li class="chapter" data-level="17.9" data-path="anova.html"><a href="anova.html#nonparam_aov"><i class="fa fa-check"></i><b>17.9</b> Непараметрические аналоги ANOVA</a>
<ul>
<li class="chapter" data-level="17.9.1" data-path="anova.html"><a href="anova.html#krask_aov"><i class="fa fa-check"></i><b>17.9.1</b> Тест Краскела-Уоллеса</a></li>
<li class="chapter" data-level="17.9.2" data-path="anova.html"><a href="anova.html#friedman_aov"><i class="fa fa-check"></i><b>17.9.2</b> Тест Фридмана</a></li>
</ul></li>
<li class="chapter" data-level="17.10" data-path="anova.html"><a href="anova.html#aov_final"><i class="fa fa-check"></i><b>17.10</b> Заключение</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="glm-general.html"><a href="glm-general.html"><i class="fa fa-check"></i><b>18</b> Общая линейная модель и ее расширения</a>
<ul>
<li class="chapter" data-level="18.1" data-path="glm-general.html"><a href="glm-general.html#general_linear_model"><i class="fa fa-check"></i><b>18.1</b> Общая линейная модель</a></li>
<li class="chapter" data-level="18.2" data-path="glm-general.html"><a href="glm-general.html#glm_model"><i class="fa fa-check"></i><b>18.2</b> Обобщенная линейная модель</a></li>
<li class="chapter" data-level="18.3" data-path="glm-general.html"><a href="glm-general.html#lme_model"><i class="fa fa-check"></i><b>18.3</b> Модель со смешанными эффектами</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="plan.html"><a href="plan.html"><i class="fa fa-check"></i><b>19</b> Планирования научного исследования</a>
<ul>
<li class="chapter" data-level="19.1" data-path="plan.html"><a href="plan.html#quest_practices"><i class="fa fa-check"></i><b>19.1</b> Спорные исследовательские практики</a></li>
<li class="chapter" data-level="19.2" data-path="plan.html"><a href="plan.html#reproducible"><i class="fa fa-check"></i><b>19.2</b> Вопроизводимые исследования</a></li>
<li class="chapter" data-level="19.3" data-path="plan.html"><a href="plan.html#stat_power"><i class="fa fa-check"></i><b>19.3</b> Статистическая мощность</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="tasks.html"><a href="tasks.html"><i class="fa fa-check"></i><b>20</b> Задания</a>
<ul>
<li class="chapter" data-level="20.1" data-path="tasks.html"><a href="tasks.html#task_coer"><i class="fa fa-check"></i><b>20.1</b> Приведение типов</a></li>
<li class="chapter" data-level="20.2" data-path="tasks.html"><a href="tasks.html#task_vec_ion"><i class="fa fa-check"></i><b>20.2</b> Векторизация</a></li>
<li class="chapter" data-level="20.3" data-path="tasks.html"><a href="tasks.html#task_vec_ind"><i class="fa fa-check"></i><b>20.3</b> Индексирование векторов</a></li>
<li class="chapter" data-level="20.4" data-path="tasks.html"><a href="tasks.html#task_matrix"><i class="fa fa-check"></i><b>20.4</b> Матрицы</a></li>
<li class="chapter" data-level="20.5" data-path="tasks.html"><a href="tasks.html#task_list"><i class="fa fa-check"></i><b>20.5</b> Списки</a></li>
<li class="chapter" data-level="20.6" data-path="tasks.html"><a href="tasks.html#task_df"><i class="fa fa-check"></i><b>20.6</b> Датафрейм</a></li>
<li class="chapter" data-level="20.7" data-path="tasks.html"><a href="tasks.html#task_if"><i class="fa fa-check"></i><b>20.7</b> Условные конструкции</a></li>
<li class="chapter" data-level="20.8" data-path="tasks.html"><a href="tasks.html#task_function"><i class="fa fa-check"></i><b>20.8</b> Создание функций</a></li>
<li class="chapter" data-level="20.9" data-path="tasks.html"><a href="tasks.html#task_apply"><i class="fa fa-check"></i><b>20.9</b> Семейство функций apply()</a></li>
<li class="chapter" data-level="20.10" data-path="tasks.html"><a href="tasks.html#task_pipe"><i class="fa fa-check"></i><b>20.10</b> magrittr::<code>%&gt;%</code></a></li>
<li class="chapter" data-level="20.11" data-path="tasks.html"><a href="tasks.html#task_select"><i class="fa fa-check"></i><b>20.11</b> Выбор столбцов: <code>dplyr::select()</code></a></li>
<li class="chapter" data-level="20.12" data-path="tasks.html"><a href="tasks.html#task_filt"><i class="fa fa-check"></i><b>20.12</b> Выбор строк: <code>dplyr::slice()</code> и <code>dplyr::filter()</code></a></li>
<li class="chapter" data-level="20.13" data-path="tasks.html"><a href="tasks.html#task_arr"><i class="fa fa-check"></i><b>20.13</b> Сортировка строк: <code>dplyr::arrange()</code></a></li>
<li class="chapter" data-level="20.14" data-path="tasks.html"><a href="tasks.html#task_dist"><i class="fa fa-check"></i><b>20.14</b> Уникальные значения: <code>dplyr::distinct()</code></a></li>
<li class="chapter" data-level="20.15" data-path="tasks.html"><a href="tasks.html#task_mutate"><i class="fa fa-check"></i><b>20.15</b> Создание колонок: <code>dplyr::mutate()</code> и <code>dplyr::transmute()</code></a></li>
<li class="chapter" data-level="20.16" data-path="tasks.html"><a href="tasks.html#task_group_by"><i class="fa fa-check"></i><b>20.16</b> Агрегация: <code>dplyr::group_by() %&gt;% summarise()</code></a></li>
<li class="chapter" data-level="20.17" data-path="tasks.html"><a href="tasks.html#task_across"><i class="fa fa-check"></i><b>20.17</b> Операции с несколькими колонками: <code>across()</code></a></li>
<li class="chapter" data-level="20.18" data-path="tasks.html"><a href="tasks.html#соединение-датафреймов-_join-task_join"><i class="fa fa-check"></i><b>20.18</b> Соединение датафреймов: *_join {#task_join}</a></li>
<li class="chapter" data-level="20.19" data-path="tasks.html"><a href="tasks.html#task_join"><i class="fa fa-check"></i><b>20.19</b> Tidy data</a></li>
<li class="chapter" data-level="20.20" data-path="tasks.html"><a href="tasks.html#desc_tasks"><i class="fa fa-check"></i><b>20.20</b> Описательная статистика</a></li>
<li class="chapter" data-level="20.21" data-path="tasks.html"><a href="tasks.html#ggplot2_tasks"><i class="fa fa-check"></i><b>20.21</b> Построение графиков в <code>ggplot2</code></a></li>
<li class="chapter" data-level="20.22" data-path="tasks.html"><a href="tasks.html#dist_tasks"><i class="fa fa-check"></i><b>20.22</b> Распределения</a></li>
<li class="chapter" data-level="20.23" data-path="tasks.html"><a href="tasks.html#one_ttest_tasks"><i class="fa fa-check"></i><b>20.23</b> Одновыборочный t-test</a></li>
<li class="chapter" data-level="20.24" data-path="tasks.html"><a href="tasks.html#dep_ttest_tasks"><i class="fa fa-check"></i><b>20.24</b> Двухвыборочный зависимый t-test</a></li>
<li class="chapter" data-level="20.25" data-path="tasks.html"><a href="tasks.html#ind_ttest_tasks"><i class="fa fa-check"></i><b>20.25</b> Двухвыборочный независимый t-test</a></li>
<li class="chapter" data-level="20.26" data-path="tasks.html"><a href="tasks.html#nonparam_ttest_tasks"><i class="fa fa-check"></i><b>20.26</b> Непараметрические аналоги t-теста</a></li>
<li class="chapter" data-level="20.27" data-path="tasks.html"><a href="tasks.html#backpack_tasks"><i class="fa fa-check"></i><b>20.27</b> Исследование набора данных Backpack</a></li>
<li class="chapter" data-level="20.28" data-path="tasks.html"><a href="tasks.html#cov_tasks"><i class="fa fa-check"></i><b>20.28</b> Ковариация</a></li>
<li class="chapter" data-level="20.29" data-path="tasks.html"><a href="tasks.html#cor_tasks"><i class="fa fa-check"></i><b>20.29</b> Коэффициент корреляции</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="solutions.html"><a href="solutions.html"><i class="fa fa-check"></i><b>21</b> Решения заданий</a>
<ul>
<li class="chapter" data-level="21.1" data-path="solutions.html"><a href="solutions.html#solution_coer"><i class="fa fa-check"></i><b>21.1</b> Приведение типов</a></li>
<li class="chapter" data-level="21.2" data-path="solutions.html"><a href="solutions.html#solution_vec_ion"><i class="fa fa-check"></i><b>21.2</b> Векторизация</a></li>
<li class="chapter" data-level="21.3" data-path="solutions.html"><a href="solutions.html#solution_vec_ind"><i class="fa fa-check"></i><b>21.3</b> Индексирование векторов</a></li>
<li class="chapter" data-level="21.4" data-path="solutions.html"><a href="solutions.html#solution_matrix"><i class="fa fa-check"></i><b>21.4</b> Матрицы</a></li>
<li class="chapter" data-level="21.5" data-path="solutions.html"><a href="solutions.html#solution_list"><i class="fa fa-check"></i><b>21.5</b> Списки</a></li>
<li class="chapter" data-level="21.6" data-path="solutions.html"><a href="solutions.html#solution_df"><i class="fa fa-check"></i><b>21.6</b> Датафрейм</a></li>
<li class="chapter" data-level="21.7" data-path="solutions.html"><a href="solutions.html#solution_if"><i class="fa fa-check"></i><b>21.7</b> Условные конструкции</a></li>
<li class="chapter" data-level="21.8" data-path="solutions.html"><a href="solutions.html#solution_function"><i class="fa fa-check"></i><b>21.8</b> Создание функций</a></li>
<li class="chapter" data-level="21.9" data-path="solutions.html"><a href="solutions.html#solution_apply"><i class="fa fa-check"></i><b>21.9</b> Семейство функций apply()</a></li>
<li class="chapter" data-level="21.10" data-path="solutions.html"><a href="solutions.html#solution_pipe"><i class="fa fa-check"></i><b>21.10</b> magrittr::<code>%&gt;%</code></a></li>
<li class="chapter" data-level="21.11" data-path="solutions.html"><a href="solutions.html#solution_arr"><i class="fa fa-check"></i><b>21.11</b> Сортировка строк: <code>dplyr::arrange()</code></a></li>
<li class="chapter" data-level="21.12" data-path="solutions.html"><a href="solutions.html#solution_dist"><i class="fa fa-check"></i><b>21.12</b> Уникальные значения: <code>dplyr::distinct()</code></a></li>
<li class="chapter" data-level="21.13" data-path="solutions.html"><a href="solutions.html#solution_mutate"><i class="fa fa-check"></i><b>21.13</b> Создание колонок: <code>dplyr::mutate()</code> и <code>dplyr::transmute()</code></a></li>
<li class="chapter" data-level="21.14" data-path="solutions.html"><a href="solutions.html#solution_group_by"><i class="fa fa-check"></i><b>21.14</b> Агрегация: <code>dplyr::group_by() %&gt;% summarise()</code></a></li>
<li class="chapter" data-level="21.15" data-path="solutions.html"><a href="solutions.html#solution_across"><i class="fa fa-check"></i><b>21.15</b> Операции с несколькими колонками: <code>across()</code></a></li>
<li class="chapter" data-level="21.16" data-path="solutions.html"><a href="solutions.html#соединение-датафреймов-_join-solution_join"><i class="fa fa-check"></i><b>21.16</b> Соединение датафреймов: *_join {#solution_join}</a></li>
<li class="chapter" data-level="21.17" data-path="solutions.html"><a href="solutions.html#solution_join"><i class="fa fa-check"></i><b>21.17</b> Tidy data</a></li>
<li class="chapter" data-level="21.18" data-path="tasks.html"><a href="tasks.html#desc_tasks"><i class="fa fa-check"></i><b>21.18</b> Описательная статистика</a></li>
<li class="chapter" data-level="21.19" data-path="solutions.html"><a href="solutions.html#ggplot2_solutions"><i class="fa fa-check"></i><b>21.19</b> Построение графиков в <code>ggplot2</code></a></li>
<li class="chapter" data-level="21.20" data-path="solutions.html"><a href="solutions.html#dist_solutions"><i class="fa fa-check"></i><b>21.20</b> Распределения</a></li>
<li class="chapter" data-level="21.21" data-path="solutions.html"><a href="solutions.html#one_ttest_solutions"><i class="fa fa-check"></i><b>21.21</b> Одновыборочный t-test</a></li>
<li class="chapter" data-level="21.22" data-path="solutions.html"><a href="solutions.html#dep_ttest_solutions"><i class="fa fa-check"></i><b>21.22</b> Двухвыборочный зависимый t-test</a></li>
<li class="chapter" data-level="21.23" data-path="solutions.html"><a href="solutions.html#ind_ttest_solutions"><i class="fa fa-check"></i><b>21.23</b> Двухвыборочный независимый t-test</a></li>
<li class="chapter" data-level="21.24" data-path="tasks.html"><a href="tasks.html#nonparam_ttest_tasks"><i class="fa fa-check"></i><b>21.24</b> Непараметрические аналоги t-теста</a></li>
<li class="chapter" data-level="21.25" data-path="solutions.html"><a href="solutions.html#backpack_solutions"><i class="fa fa-check"></i><b>21.25</b> Исследование набора данных Backpack</a></li>
<li class="chapter" data-level="21.26" data-path="solutions.html"><a href="solutions.html#cov_solutions"><i class="fa fa-check"></i><b>21.26</b> Ковариация</a></li>
<li class="chapter" data-level="21.27" data-path="solutions.html"><a href="solutions.html#cor_solutions"><i class="fa fa-check"></i><b>21.27</b> Коэффициент корреляции</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ссылки-на-литературу.html"><a href="ссылки-на-литературу.html"><i class="fa fa-check"></i>Ссылки на литературу</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Анализ данных и статистика в R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="vector" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Вектор</h1>
<div id="atomic" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Понятие atomic вектора в R</h2>
<p>Если у вас не было линейной алгебры (или у вас с ней было все плохо), то просто запомните, что <strong>вектор</strong> (<strong>atomic vector</strong> или просто <strong>atomic</strong>) — это набор (столбик) чисел в определенном порядке.</p>
<p>Если вы привыкли из школьного курса физики считать вектора стрелочками, то не спешите возмущаться и паниковать. Представьте стрелочки как точки из нуля координат {0,0} до какой-то точки на координатной плоскости, например, {2,3}:</p>
<p><img src="images/coord_vector.png" width="400" /></p>
<p>Вот последние два числа и будем считать вектором. Попытайтесь теперь мысленно стереть координатную плоскость и выбросить стрелочки из головы, оставив только последовательность чисел {2,3}:</p>
<p><img src="images/coord_vector_blur.png" width="400" /></p>
<p>На самом деле, мы уже работали с векторами в R, но, возможно, вы об этом даже не догадывались. Дело в том, что в R нет как таковых скалярных (т.е. одиночных) значений, <strong>есть вектора длиной 1</strong>. Такие дела!</p>
<p>Чтобы создать вектор из нескольких значений, нужно воспользоваться функцией <code>c()</code>:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="vector.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">23</span>, <span class="dv">42</span>)</span></code></pre></div>
<pre><code>## [1]  4  8 15 16 23 42</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="vector.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;Хэй&quot;</span>, <span class="st">&quot;Хэй&quot;</span>, <span class="st">&quot;Ха&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Хэй&quot; &quot;Хэй&quot; &quot;Ха&quot;</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="vector.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE</code></pre>
<blockquote>
<p>Одна из самых мерзких и раздражающих причин ошибок в коде — это использование <code>с</code> из кириллицы вместо <code>c</code> из латиницы. Видите разницу? И я не вижу. А R видит. И об этом сообщает:</p>
</blockquote>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="vector.html#cb113-1" aria-hidden="true" tabindex="-1"></a>с(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## Error in с(3, 4, 5): не могу найти функцию &quot;с&quot;</code></pre>
<p>Для создания числовых векторов есть удобный оператор <code>:</code>.</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="vector.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="vector.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">:-</span><span class="dv">3</span></span></code></pre></div>
<pre><code>## [1]  5  4  3  2  1  0 -1 -2 -3</code></pre>
<p>Этот оператор создает вектор от первого числа до второго с шагом 1. Вы не представляете, как часто эта штука нам пригодится… Если же нужно сделать вектор с другим шагом, то есть функция <code>seq()</code>:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="vector.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1]  10  20  30  40  50  60  70  80  90 100</code></pre>
<p>Кроме того, можно задавать не шаг, а длину вектора. Тогда функция <code>seq()</code> сама посчитает шаг:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="vector.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">13</span>, <span class="at">length.out =</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1]  1  5  9 13</code></pre>
<p>Другая функция — <code>rep()</code> — позволяет создавать вектора с повторяющимися значениями. Первый аргумент — значение, которое нужно повторять, а второй аргумент — сколько раз повторять.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="vector.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 1 1 1 1 1</code></pre>
<p>И первый, и второй аргумент могут быть векторами!</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="vector.html#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 1 2 3 1 2 3</code></pre>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="vector.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 2 3 3 3</code></pre>
<p>Еще можно объединять вектора (что мы, по сути, и делали, просто с векторами длиной 1):</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="vector.html#cb129-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Hey&quot;</span>, <span class="st">&quot;Ho&quot;</span>)</span>
<span id="cb129-2"><a href="vector.html#cb129-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Let&#39;s&quot;</span>, <span class="st">&quot;Go!&quot;</span>)</span>
<span id="cb129-3"><a href="vector.html#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(v1, v2)</span></code></pre></div>
<pre><code>## [1] &quot;Hey&quot;   &quot;Ho&quot;    &quot;Let&#39;s&quot; &quot;Go!&quot;</code></pre>
<p>Очень многие функции в R работают именно с векторами. Например, функции <code>sum()</code> (считает сумму значений вектора) и <code>mean()</code> (считает среднее арифметическое всех значений в векторе):</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="vector.html#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="vector.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 5.5</code></pre>
</div>
<div id="coercion" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Приведение типов</h2>
<p>Что будет, если вы объедините два вектора с значениями разных типов? Ошибка?</p>
<p>Мы уже обсуждали, что в обычных векторах (<em>atomic</em> векторах) может быть только один тип данных. В некоторых языках программирования при операции с данными разных типов мы бы получили ошибку. А вот в R при несовпадении типов произойдет попытка привести типы к “общему знаменателю,” то есть конвертировать данные в более “широкий” тип (а иногда — более “узкий” тип, если того требует функция).</p>
<p>Например:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="vector.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0 2</code></pre>
<p><code>FALSE</code> превратился в <code>0</code> (а <code>TRUE</code> превратился бы в <code>1</code>), чтобы оба значения можно было объединить в вектор. То же самое произошло бы в случае операций с векторами:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="vector.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">+</span> <span class="cn">TRUE</span></span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Это называется <strong>неявным приведением типов (implicit coercion)</strong>.</p>
<p>Вот более сложный пример:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="vector.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="dv">3</span>, <span class="st">&quot;Привет&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;TRUE&quot;   &quot;3&quot;      &quot;Привет&quot;</code></pre>
<p>Здесь все значения были приведены сразу к строковому типу данных.</p>
<p>У R есть иерархия приведения типов:</p>
<p><code>NULL &lt; raw &lt; logical &lt; integer &lt; double &lt; complex &lt; character &lt; list &lt; expression</code>.</p>
<p>Мы из этого списка еще многого не знаем, сейчас важно запомнить, что логические данные — <code>TRUE</code> и <code>FALSE</code> — превращаются в <code>0</code> и <code>1</code> соответственно, а <code>0</code> и <code>1</code> в строчки <code>"0"</code> и <code>"1"</code>.</p>
<p>Если Вы боитесь полагаться на приведение типов, то можете воспользоваться функциями <code>as.нужныйтипданных</code> для явного приведения типов (<strong>explicit coercion</strong>):</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="vector.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>))</span></code></pre></div>
<pre><code>## [1] 1 0 0</code></pre>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="vector.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)))</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;0&quot; &quot;0&quot;</code></pre>
<p>Можно превращать и обратно, например, строковые значения в числовые. Если среди числа встретится буква или другой неподходящий знак, то мы получим предупреждение <code>NA</code> — пропущенное значение (мы очень скоро научимся с ними работать).</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="vector.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2&quot;</span>, <span class="st">&quot;три&quot;</span>))</span></code></pre></div>
<pre><code>## Warning: в результате преобразования созданы NA</code></pre>
<pre><code>## [1]  1  2 NA</code></pre>
<blockquote>
<p>Один из распространенных примеров использования неявного приведения типов — использования функций <code>sum()</code> и <code>mean()</code> для подсчета в логическом векторе количества и доли <code>TRUE</code> соответсвенно. Мы будем много раз пользоваться этим приемом в дальнейшем!</p>
</blockquote>
</div>
<div id="vector_op" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Векторизация</h2>
<p>Все те арифметические операторы, что мы использовали ранее, можно использовать с векторами одинаковой длины:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="vector.html#cb148-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb148-2"><a href="vector.html#cb148-2" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">1</span></span>
<span id="cb148-3"><a href="vector.html#cb148-3" aria-hidden="true" tabindex="-1"></a>n <span class="sc">+</span> m</span></code></pre></div>
<pre><code>## [1] 5 5 5 5</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="vector.html#cb150-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">-</span> m</span></code></pre></div>
<pre><code>## [1] -3 -1  1  3</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="vector.html#cb152-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">*</span> m</span></code></pre></div>
<pre><code>## [1] 4 6 6 4</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="vector.html#cb154-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">/</span> m</span></code></pre></div>
<pre><code>## [1] 0.2500000 0.6666667 1.5000000 4.0000000</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="vector.html#cb156-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">^</span> m <span class="sc">+</span> m <span class="sc">*</span> (n <span class="sc">-</span> m)</span></code></pre></div>
<pre><code>## [1] -11   5  11   7</code></pre>
<p>Если применить операторы на двух векторах одинаковой длины, то мы получим результат поэлементного применения оператора к двум векторам. Это называется <strong>векторизацией</strong> (<strong>vectorization</strong>).</p>
<blockquote>
<p>Если после какого-нибудь MATLAB Вы привыкли, что по умолчанию операторы работают по правилам линейной алгебры и <code>m * n</code> будет давать скалярное произведение (<em>dot product</em>), то снова нет. Для скалярного произведения нужно использовать операторы с <code>%</code> по краям:</p>
</blockquote>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="vector.html#cb158-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">%*%</span> m</span></code></pre></div>
<pre><code>##      [,1]
## [1,]   20</code></pre>
<blockquote>
<p>Абсолютно так же и с операциями с матрицами в R, хотя про матрицы будет немного позже.</p>
</blockquote>
<p>В принципе, большинство функций в R, которые работают с отдельными значениями, так же хорошо работают и с целыми векторами. Скажем, если вы хотите извлечь корень из нескольких чисел, то для этого не нужны никакие циклы (как это обычно делается во многих других языках программирования). Можно просто “скормить” вектор функции и получить результат применения функции к каждому элементу вектора:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="vector.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>##  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427
##  [9] 3.000000 3.162278</code></pre>
<p>Таких векторизованных функций в R очень много. Многие из них написаны на более низкоуровневых языках программирования (C, C++, FORTRAN), за счет чего использование таких функций приводит не только к более элегантному, лаконичному, но и к более быстрому коду.</p>
<blockquote>
<p>Векторизация в R — это очень важная фишка, которая отличает этот язык программирования от многих других. Если вы уже имеете опыт программирования на другом языке, то вам во многих задачах захочется использовать циклы типа <code>for</code> и <code>while</code> <a href="loops-conditions.html#for">7.2</a>. Не спешите этого делать! В очень многих случаях циклы можно заменить векторизацией. Тем не менее, векторизация — это не единственный способ избавить от циклов типа <code>for</code> и <code>while</code> <a href="functional.html#apply">8.5.1</a>.</p>
</blockquote>
</div>
<div id="recycling" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Ресайклинг</h2>
<p>Допустим мы хотим совершить какую-нибудь операцию с двумя векторами. Как мы убедились, с этим обычно нет никаких проблем, если они совпадают по длине. А что если вектора не совпадают по длине?
Ничего страшного! Здесь будет работать правило <strong>ресайклинга</strong> (<em>правило переписывания, recycling rule</em>). Это означает, что если мы делаем операцию на двух векторах разной длины, то если короткий вектор кратен по длине длинному, короткий вектор будет повторяться необходимое количество раз:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="vector.html#cb162-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb162-2"><a href="vector.html#cb162-2" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb162-3"><a href="vector.html#cb162-3" aria-hidden="true" tabindex="-1"></a>n <span class="sc">*</span> m</span></code></pre></div>
<pre><code>## [1] 1 4 3 8</code></pre>
<p>А что будет, если совершать операции с вектором и отдельным значением? Можно считать это частным случаем ресайклинга: короткий вектор длиной 1 будет повторятся столько раз, сколько нужно, чтобы он совпадал по длине с длинным:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="vector.html#cb164-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] 2 4 6 8</code></pre>
<p>Если же меньший вектор не кратен большему (например, один из них длиной 3, а другой длиной 4), то R посчитает результат, но выдаст предупреждение.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="vector.html#cb166-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">+</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## Warning in n + c(3, 4, 5): длина большего объекта не является произведением
## длины меньшего объекта</code></pre>
<pre><code>## [1] 4 6 8 7</code></pre>
<p>Проблема в том, что эти предупреждения могут в неожиданный момент стать причиной ошибок. Поэтому <a href="https://stackoverflow.com/questions/6555651/under-what-circumstances-does-r-recycle">не стоит полагаться</a> на ресайклинг некратных по длине векторов. А вот ресайклинг кратных по длине векторов — это очень удобная штука, которая используется очень часто.</p>
</div>
<div id="index_atomic" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Индексирование векторов</h2>
<p>Итак, мы подошли к одному из самых сложных моментов. И одному из основных. От того, как хорошо вы научись с этим работать, зависит весь ваш дальнейший успех на R-поприще!</p>
<p>Речь пойдет об <strong>индексировании</strong> векторов. Задача, которую Вам придется решать каждые пять минут работы в R — как выбрать из вектора (или же списка, матрицы и датафрейма) какую-то его часть. Для этого используются квадратные скобочки <code>[]</code> (не круглые — они для функций!).</p>
<p>Самое простое — индексировать по номеру индекса, т.е. порядку значения в векторе.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="vector.html#cb169-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">13</span>, <span class="dv">21</span>, <span class="dv">34</span>)</span>
<span id="cb169-2"><a href="vector.html#cb169-2" aria-hidden="true" tabindex="-1"></a>n[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="vector.html#cb171-1" aria-hidden="true" tabindex="-1"></a>n[<span class="dv">10</span>]</span></code></pre></div>
<pre><code>## [1] 34</code></pre>
<blockquote>
<p>Если вы знакомы с другими языками программирования (не MATLAB, там все так же) и уже научились думать, что индексация с 0 — это очень удобно и очень правильно (ну или просто свыклись с этим), то в R вам придется переучиться обратно. Здесь первый индекс — это 1, а последний равен длине вектора — ее можно узнать с помощью функции <code>length()</code>. С обоих сторон индексы берутся включительно.</p>
</blockquote>
<p>С помощью индексирования можно не только вытаскивать имеющиеся значения в векторе, но и присваивать им новые:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="vector.html#cb173-1" aria-hidden="true" tabindex="-1"></a>n[<span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb173-2"><a href="vector.html#cb173-2" aria-hidden="true" tabindex="-1"></a>n</span></code></pre></div>
<pre><code>##  [1]  0  1 20  2  3  5  8 13 21 34</code></pre>
<p>Конечно, можно использовать целые векторы для индексирования:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="vector.html#cb175-1" aria-hidden="true" tabindex="-1"></a>n[<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>]</span></code></pre></div>
<pre><code>## [1] 2 3 5 8</code></pre>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="vector.html#cb177-1" aria-hidden="true" tabindex="-1"></a>n[<span class="dv">10</span><span class="sc">:</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>##  [1] 34 21 13  8  5  3  2 20  1  0</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="vector.html#cb179-1" aria-hidden="true" tabindex="-1"></a>n[<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb179-2"><a href="vector.html#cb179-2" aria-hidden="true" tabindex="-1"></a>n</span></code></pre></div>
<pre><code>##  [1]  0  1 20  0  0  0  8 13 21 34</code></pre>
<p>Индексирование с минусом выдаст вам все значения вектора кроме выбранных:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="vector.html#cb181-1" aria-hidden="true" tabindex="-1"></a>n[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1]  1 20  0  0  0  8 13 21 34</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="vector.html#cb183-1" aria-hidden="true" tabindex="-1"></a>n[<span class="fu">c</span>(<span class="sc">-</span><span class="dv">4</span>, <span class="sc">-</span><span class="dv">5</span>)]</span></code></pre></div>
<pre><code>## [1]  0  1 20  0  8 13 21 34</code></pre>
<p>Минус здесь “выключает” выбранные значения из вектора, а не означает отсчет с конца как в Python.</p>
<p>Более того, можно использовать логический вектор для индексирования. В этом случае нужен логический вектор такой же длины:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="vector.html#cb185-1" aria-hidden="true" tabindex="-1"></a>n[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)]</span></code></pre></div>
<pre><code>## [1]  0 20  0  8 21</code></pre>
<p>Логический вектор работает здесь как фильтр: пропускает только те значения, где на соответствующей позиции в логическом векторе для индексирования содержится <code>TRUE</code>, и не пропускает те значения, где на соответствующей позиции в логическом векторе для индексирования содержится <code>FALSE</code>.</p>
<p><img src="images/indexgandolf.png" width="400" /></p>
<p>Ну а если эти два вектора (исходный вектор и логический вектор индексов) не равны по длине, то тут будет снова работать правило ресайклинга!</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="vector.html#cb187-1" aria-hidden="true" tabindex="-1"></a>n[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>)] <span class="co">#то же самое - recycling rule!</span></span></code></pre></div>
<pre><code>## [1]  0 20  0  8 21</code></pre>
<p>Есть еще один способ индексирования векторов, но он несколько более редкий: индексирование по имени. Дело в том, что для значений векторов можно (но не обязательно) присваивать имена:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="vector.html#cb189-1" aria-hidden="true" tabindex="-1"></a>my_named_vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">first =</span> <span class="dv">1</span>,</span>
<span id="cb189-2"><a href="vector.html#cb189-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">second =</span> <span class="dv">2</span>,</span>
<span id="cb189-3"><a href="vector.html#cb189-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">third =</span> <span class="dv">3</span>)</span>
<span id="cb189-4"><a href="vector.html#cb189-4" aria-hidden="true" tabindex="-1"></a>my_named_vector[<span class="st">&#39;first&#39;</span>]</span></code></pre></div>
<pre><code>## first 
##     1</code></pre>
<p>А еще можно “вытаскивать” имена из вектора с помощью функции <code>names()</code> и присваивать таким образом новые имена.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="vector.html#cb191-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb191-2"><a href="vector.html#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(d) <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb191-3"><a href="vector.html#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(d)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="vector.html#cb193-1" aria-hidden="true" tabindex="-1"></a>d[<span class="st">&quot;a&quot;</span>]</span></code></pre></div>
<pre><code>## a 
## 1</code></pre>
<blockquote>
<p><code>letters</code> — это “зашитая” в R константа — вектор букв от a до z. Иногда это очень удобно! Кроме того, есть константа <code>LETTERS</code> — то же самое, но заглавными буквами. А еще в R есть названия месяцев на английском и числовая константа <code>pi</code>.</p>
</blockquote>
<p>Вернемся к нашему вектору <code>n</code> и посчитаем его среднее с помощью функции <code>mean()</code>:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="vector.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(n)</span></code></pre></div>
<pre><code>## [1] 9.7</code></pre>
<p>А как вытащить все значения, которые больше среднего?</p>
<p>Сначала получим логический вектор — какие значения больше среднего:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="vector.html#cb197-1" aria-hidden="true" tabindex="-1"></a>larger <span class="ot">&lt;-</span> n <span class="sc">&gt;</span> <span class="fu">mean</span>(n)</span>
<span id="cb197-2"><a href="vector.html#cb197-2" aria-hidden="true" tabindex="-1"></a>larger</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE</code></pre>
<p>А теперь используем его для индексирования вектора <code>n</code>:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="vector.html#cb199-1" aria-hidden="true" tabindex="-1"></a>n[larger]</span></code></pre></div>
<pre><code>## [1] 20 13 21 34</code></pre>
<p>Можно все это сделать в одну строчку:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="vector.html#cb201-1" aria-hidden="true" tabindex="-1"></a>n[n <span class="sc">&gt;</span> <span class="fu">mean</span>(n)]</span></code></pre></div>
<pre><code>## [1] 20 13 21 34</code></pre>
<p>Предыдущая строчка отражает то, что мы будем постоянно делать в R: вычленять (subset) из данных отдельные куски на основании разных условий.</p>
</div>
<div id="logic_vectors" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Работа с логическими векторами</h2>
<p>На работе с логическими векторами построено очень много удобных фишек, связанных со сравнением условий.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="vector.html#cb203-1" aria-hidden="true" tabindex="-1"></a>eyes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;blue&quot;</span>, <span class="st">&quot;brown&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<div id="logic_mean_sum" class="section level3" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> <code>mean()</code> и <code>sum()</code> для подсчета пропорций и количества TRUE</h3>
<p>Уже знакомая нам функция <code>sum()</code> позволяет посчитать количество <code>TRUE</code> в логическом векторе. Например, можно удобно посчитать сколько раз значение <code>"blue"</code> встречается в векторе <code>eyes</code>:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="vector.html#cb204-1" aria-hidden="true" tabindex="-1"></a>eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span></span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="vector.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Функцию <code>mean()</code> можно использовать для подсчета пропорций <code>TRUE</code> в логическом векторе.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="vector.html#cb208-1" aria-hidden="true" tabindex="-1"></a>eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span></span></code></pre></div>
<pre><code>## [1] FALSE  TRUE  TRUE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="vector.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 0.5</code></pre>
<p>Умножив на 100, мы получим долю выраженную в процентах:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="vector.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">*</span> <span class="dv">100</span></span></code></pre></div>
<pre><code>## [1] 50</code></pre>
</div>
<div id="all_any" class="section level3" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> <code>all()</code> и <code>any()</code></h3>
<p>Функция <code>all()</code> выдает <code>TRUE</code> только когда все значения логического вектора на входе равны <code>TRUE</code>:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="vector.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Функция <code>any()</code> выдает <code>TRUE</code> когда есть хотя бы одно значение <code>TRUE</code>:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="vector.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Вместе с оператором <code>!</code> можно получить много дополнительных вариантов. Например, есть ли хотя бы один <code>FALSE</code> в векторе?</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="vector.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(<span class="sc">!</span>eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="vector.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">all</span>(eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Все ли значения в векторе равны <code>FALSE</code>?</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="vector.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="sc">!</span>eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="vector.html#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">any</span>(eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="which" class="section level3" number="3.6.3">
<h3><span class="header-section-number">3.6.3</span> Превращение логических значений в индексы: <code>which()</code></h3>
<p>Как вы уже знаете, и логические векторы, и числовые вектора с индексами могут использоваться для индексирования векторов. Иногда может понадобиться превратить логический вектор в вектор индексов. Для этого есть функция <code>which()</code></p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="vector.html#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 2 3 6</code></pre>
</div>
<div id="in" class="section level3" number="3.6.4">
<h3><span class="header-section-number">3.6.4</span> оператор %in% и match()</h3>
<p>Часто возникает такая задача: нужно проверить вектор на равенство с хотя бы одним значением из другого вектора. Например, мы хотим вычленить всех зеленоглазых и голубоглазых. Может возникнуть идея сделать так:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="vector.html#cb228-1" aria-hidden="true" tabindex="-1"></a>eyes[eyes <span class="sc">==</span> <span class="fu">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;green&quot; &quot;blue&quot;  &quot;green&quot; &quot;blue&quot;</code></pre>
<p>Перед нами самый страшный случай: результат <em>похож</em> на правильный, но не правильный! Попытайтесь самостоятельно понять почему этот ответ неверный и что произошло на самом деле.</p>
<p>А на самом деле мы просто сравнили два вектора, один из которых короче другого, следовательно, у нас сработало правило ресайклинга.</p>
<p><img src="images/logical_vectors_recycling.jpg" /></p>
<p>Как мы видим, это совсем не то, что нам нужно! В данной ситуации нам подойдет сравнение с двумя значениями вместе с логическим ИЛИ.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="vector.html#cb230-1" aria-hidden="true" tabindex="-1"></a>eyes[eyes <span class="sc">==</span> <span class="st">&quot;green&quot;</span> <span class="sc">|</span> eyes <span class="sc">==</span> <span class="st">&quot;blue&quot;</span>]</span></code></pre></div>
<pre><code>## [1] &quot;green&quot; &quot;blue&quot;  &quot;blue&quot;  &quot;green&quot; &quot;blue&quot;</code></pre>
<p>Однако это не очень удобно, особенно если значений больше 2. Тогда на помощь приходит оператор <code>%in%</code>, который выполняет именно то, что нам изначально нужно: выдает для каждого значения в векторе слева, есть ли это значение среди значений вектора справа.</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="vector.html#cb232-1" aria-hidden="true" tabindex="-1"></a>eyes[eyes <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>)]</span></code></pre></div>
<pre><code>## [1] &quot;green&quot; &quot;blue&quot;  &quot;blue&quot;  &quot;green&quot; &quot;blue&quot;</code></pre>
<p>Основное преимущество оператора <code>%in%</code> в его простоте и понятности. У оператора <code>%in%</code> есть старший брат, более сложный и более мощный. Функция <code>match()</code> работает похожим образом на <code>%in%</code>, но при совпадении значения в левом векторе с одним из значений в правом выдает индекс соответствующего значения вместо <code>TRUE</code>. Если же совпадений нет, то вместо <code>FALSE</code> функция <code>match()</code> выдает <code>NA</code> (что можно поменять параметром <code>nomatch =</code>).</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="vector.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">match</span>(eyes, <span class="fu">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<pre><code>## [1]  1  2  2 NA  1  2</code></pre>
<p>Зачем это может понадобиться? Во-первых, это способ соединить два набора данных (хотя для этого есть и более подходящие инструменты), во-вторых, так можно заменить все значения кроме выбранных заменить на <code>NA</code>.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="vector.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>)[<span class="fu">match</span>(eyes, <span class="fu">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>))]</span></code></pre></div>
<pre><code>## [1] &quot;green&quot; &quot;blue&quot;  &quot;blue&quot;  NA      &quot;green&quot; &quot;blue&quot;</code></pre>
</div>
</div>
<div id="na" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> NA - пропущенные значения</h2>
<p>В реальных данных у нас часто чего-то не хватает. Например, из-за технической ошибки или невнимательности не получилось записать какое-то измерение. Для обозначения пропущенных значений в R есть специальное значение <code>NA</code> (расшифровывается как <em>Not Available</em> - недоступное значение). <code>NA</code> — это не строка <code>"NA"</code>, не <code>0</code>, не пустая строка <code>""</code> и не <code>FALSE</code>. <code>NA</code> — это <code>NA</code>.
Большинство операций с векторами, содержащими <code>NA</code> будут выдавать <code>NA</code>:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="vector.html#cb238-1" aria-hidden="true" tabindex="-1"></a>missed <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb238-2"><a href="vector.html#cb238-2" aria-hidden="true" tabindex="-1"></a>missed <span class="sc">==</span> <span class="st">&quot;NA&quot;</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="vector.html#cb240-1" aria-hidden="true" tabindex="-1"></a>missed <span class="sc">==</span> <span class="st">&quot;&quot;</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="vector.html#cb242-1" aria-hidden="true" tabindex="-1"></a>missed <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Заметьте, даже сравнение <code>NA</code> c <code>NA</code> выдает <code>NA</code>. Это может прозвучать абсурдно: ну как же так, и то <code>NA</code>, и другое <code>NA</code> — это же одно и то же, они должны быть равны! Не совсем: <code>NA</code> — это отсутствие информации об объекте, неопределенность, неизвестная нам величина. Если мы не знаем двух значений (т.е. имеем два <code>NA</code>), то это еще не значит, что они равны.</p>
<p>Иногда наличие <code>NA</code> в данных очень бесит:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="vector.html#cb244-1" aria-hidden="true" tabindex="-1"></a>n[<span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb244-2"><a href="vector.html#cb244-2" aria-hidden="true" tabindex="-1"></a>n</span></code></pre></div>
<pre><code>##  [1]  0  1 20  0 NA  0  8 13 21 34</code></pre>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="vector.html#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(n)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Получается, что наличие <code>NA</code> “заражает” неопределенностью все последующие действия. Что же делать?</p>
<p>Наверное, надо сравнить вектор с <code>NA</code> и исключить этих пакостников. Давайте попробуем:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="vector.html#cb248-1" aria-hidden="true" tabindex="-1"></a>n <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
<pre><code>##  [1] NA NA NA NA NA NA NA NA NA NA</code></pre>
<p>Ах да, мы ведь только что узнали, что даже сравнение <code>NA</code> c <code>NA</code> приводит к <code>NA</code>! Сначала это может показаться нелогичным: ведь с обоих сторон <code>NA</code>, почему же тогда результат их сравнения — это тоже <code>NA</code>, а не <code>TRUE</code>?</p>
<p>Дело в том, что сравнивая две неопределенности, вы не можете установить между ними знак равенства. Представим себе двух супергероев: Бэтмена и Спайдермена. Допустим, мы не знаем их рост:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="vector.html#cb250-1" aria-hidden="true" tabindex="-1"></a>Batman <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb250-2"><a href="vector.html#cb250-2" aria-hidden="true" tabindex="-1"></a>Spiderman <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code></pre></div>
<p>Одинаковый ли у них рост?</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="vector.html#cb251-1" aria-hidden="true" tabindex="-1"></a>Batman <span class="sc">==</span> Spiderman</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>Мы не знаем! Возможно, да, возможно, и нет. Поэтому у нас здесь остается неопределенность.</p>
<p>Так как же избавиться от <code>NA</code> в данных? Самый простой способ — это функция <code>is.na()</code>:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="vector.html#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(n)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>Результат выполнения <code>is.na(n)</code> выдает <code>FALSE</code> на тех позициях, где у нас числа (или другие значения), и <code>TRUE</code> там, где у нас <code>NA</code>. Чтобы вычленить из вектора <code>n</code> все значения кроме <code>NA</code> нам нужно, чтобы было наоборот: <code>TRUE</code>, если это не <code>NA</code>, <code>FALSE</code>, если это <code>NA</code>. Здесь нам понадобится логический оператор НЕ <code>!</code> (мы его уже встречали — см. @ref(data_types)), который инвертирует логические значения:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="vector.html#cb255-1" aria-hidden="true" tabindex="-1"></a>n[<span class="sc">!</span><span class="fu">is.na</span>(n)]</span></code></pre></div>
<pre><code>## [1]  0  1 20  0  0  8 13 21 34</code></pre>
<p>Ура, мы можем считать среднее без <code>NA</code>!</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="vector.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(n[<span class="sc">!</span><span class="fu">is.na</span>(n)])</span></code></pre></div>
<pre><code>## [1] 10.77778</code></pre>
<p>Теперь Вы понимаете, зачем нужно отрицание (<code>!</code>)</p>
<p>Вообще, есть еще один из способов посчитать среднее, если есть <code>NA</code>. Для этого надо залезть в хэлп по функции <em>mean()</em>:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="vector.html#cb259-1" aria-hidden="true" tabindex="-1"></a>?<span class="fu">mean</span>()</span></code></pre></div>
<p>В хэлпе мы найдем параметр <code>na.rm =</code>, который по умолчанию <code>FALSE</code>. Вы знаете, что нужно делать!</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="vector.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(n, <span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 10.77778</code></pre>
<p><code>NA</code> может появляться в векторах разных типов. На самом деле, <code>NA</code> - это специальное значение в логических векторах, тогда как в векторах других типов <code>NA</code> появляется как <code>NA_integer_</code>, <code>NA_real_</code>, <code>NA_complex_</code> или <code>NA_character_</code>, но R обычно сам все переводит в нужный формат и показывает как просто <code>NA</code>. Таким образом, <code>NA</code> в векторах разных типов — это разные <code>NA</code>, хотя на практике эта деталь обычно несущественна.</p>
<blockquote>
<p>Кроме <code>NA</code> есть еще <code>NaN</code> — это разные вещи. <code>NaN</code> расшифровывается как <em>Not a Number</em> и получается в результате таких операций как <code>0 / 0</code>. Тем не менее, функция <code>is.na()</code> выдает <code>TRUE</code> на <code>NaN</code>, а вот функция <code>is.nan()</code> выдает <code>TRUE</code> на <code>NaN</code> и <code>FALSE</code> на <code>NA</code>:</p>
</blockquote>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="vector.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="vector.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(<span class="cn">NaN</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="vector.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.nan</span>(<span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="vector.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.nan</span>(<span class="cn">NaN</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="vector_end" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Заключение</h2>
<p>Итак, с векторами мы более-менее разобрались. Помните, что вектора — это один из краеугольных камней вашей работы в R. Если вы хорошо с ними разобрались, то дальше все будет довольно несложно. Тем не менее, вектора — это не все. Есть еще два важных типа данных: списки (<strong>list</strong>) и матрицы (<strong>matrix</strong>). Их можно рассматривать как своеобразное “расширение” векторов, каждый в свою сторону. Ну а списки и матрицы нужны чтобы понять основной тип данных в R — <strong>data.frame</strong>.</p>
<p><img src="images/New-Mind-Map.jpg" width="400" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="complex-structures.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Pozdniakov/tidy_stats/edit/master/01-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["tidy_stats.pdf", "tidy_stats.epub"],
"toc": {
"collapse": "section"
},
"self_contained": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
